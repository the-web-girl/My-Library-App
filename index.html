<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üìö Biblioth√®que de Livres</title>
  <meta name="description" content="Application de gestion de livres ‚Ä¢ Recherche Google Books API automatique ‚Ä¢ Gestion Wishlist & Biblioth√®que ‚Ä¢ Formats Broch√©/Poche ‚Ä¢ Groupement par s√©rie/univers">
  <meta name="color-scheme" content="dark light">

  <link rel="stylesheet" href="./style.css">

</head>

<body>
  <header>
    <div class="container">
      <div class="header-content">
        <h1>üìö Biblioth√®que de Livres</h1>
        <p class="subtitle">
          Collection partag√©e multi-utilisateurs ‚Ä¢ Recherche Google Books API automatique ‚Ä¢ 
          Formats Broch√©/Poche ‚Ä¢ Regroupement par s√©rie/univers ‚Ä¢ 
          Synchronisation temps r√©el via Firebase Firestore.
        </p>
      </div>
      <button id="themeToggle" class="btn btn-secondary">
        üåô Mode sombre
      </button>
    </div>
  </header>

  <main class="container">
    <!-- Formulaire d'ajout -->
    <section class="panel">
      <h2 class="sr-only">Ajouter un livre</h2>
      <form id="addBookForm">
        <div class="form-grid">
          <div class="field col-6 ac-wrapper">
            <label for="bookTitle">Titre (recherche automatique)</label>
            <input id="bookTitle" type="text" placeholder="Ex: Le Seigneur des Anneaux" autocomplete="on" />
            <div id="ac-list" class="ac-list"></div>
          </div>
          
          <div class="field col-3">
            <label for="bookAuthor">Auteur</label>
            <input id="bookAuthor" type="text" placeholder="Ex: Tolkien" />
          </div>

          <div class="field col-3">
            <label for="bookYear">Ann√©e</label>
            <input id="bookYear" type="text" placeholder="Ex: 1954" />
          </div>
          
          <div class="field col-6">
            <label for="coverUrl">URL Couverture (auto-remplie)</label>
            <input id="coverUrl" type="url" placeholder="https://..." />
          </div>
          
          <div class="field col-3">
            <label for="series">S√©rie/Univers</label>
            <input id="series" type="text" placeholder="Ex: Harry Potter" />
          </div>
          
          <div class="field col-2">
            <label for="volume">Tome/Volume</label>
            <select id="volume">
              <option value="">Aucun</option>
              <option value="1">Tome 1</option>
              <option value="2">Tome 2</option>
              <option value="3">Tome 3</option>
              <option value="4">Tome 4</option>
              <option value="5">Tome 5</option>
              <option value="6">Tome 6</option>
              <option value="7">Tome 7</option>
              <option value="8">Tome 8</option>
              <option value="9">Tome 9</option>
              <option value="10">Tome 10</option>
              <option value="11">Tome 11</option>
              <option value="12">Tome 12</option>
              <option value="13">Tome 13</option>
              <option value="14">Tome 14</option>
              <option value="15">Tome 15</option>
              <option value="16">Tome 16</option>
              <option value="17">Tome 17</option>
              <option value="18">Tome 18</option>
              <option value="19">Tome 19</option>
              <option value="20">Tome 20</option>
              <option value="21">Tome 21</option>
              <option value="22">Tome 22</option>
              <option value="23">Tome 23</option>
              <option value="24">Tome 24</option>
              <option value="25">Tome 25</option>
              <option value="26">Tome 26</option>
              <option value="27">Tome 27</option>
              <option value="28">Tome 28</option>
              <option value="29">Tome 29</option>
              <option value="30">Tome 30</option>
              <option value="autre">Autre...</option>
            </select>
          </div>
<!-- 
          <div class="field col-1">
            <label for="customVolume">N¬∞ Tome</label>
            <input id="customVolume" type="number" placeholder="Ex: 31" min="1" style="display: none;" />
          </div> -->
          
          <div class="field col-2">
            <label for="format">Format</label>
            <select id="format">
              <option value="broch√©">Broch√©</option>
              <option value="poche">Poche</option>
              <option value="e-book">E-book</option>
              <option value="audio">Audio</option>
            </select>
          </div>
          
          <div class="field col-12">
            <label>Possession & Lecture</label>
            <div class="chips">
              <label class="chip">
                <input id="owned" type="checkbox" />
                Je poss√®de
              </label>
              <label class="chip bd-yellow">
                <input id="readingTodo" type="checkbox" />
                √Ä lire
              </label>
              <label class="chip bd-green">
                <input id="readingDone" type="checkbox" />
                Lu
              </label>
              <label class="chip">
                <input id="owned" type="checkbox" />
                Wishlist
              </label>
            </div>
          </div>
          
          <div class="field col-3">
            <button class="btn btn-primary" type="submit">Ajouter</button>
          </div>
          
          <div class="field col-3">
            <button id="resetBtn" class="btn btn-secondary" type="button">Effacer</button>
          </div>
        </div>
      </form>
    </section>

    <!-- Filtres am√©lior√©s -->
    <div class="toolbar">
      <div class="librarySearch">
        <label for="librarySearch">Recherchez dans la biblioth√®que</label>
        <input id="librarySearch" class="search-input" type="text" placeholder="Rechercher par titre, auteur, s√©rie..." />
      </div>
      
      <div class="filter-contenaire field">
        <select id="searchType" class="col-3">
          <option value="all">Tout rechercher</option>
          <option value="title">Titre uniquement</option>
          <option value="author">Auteur uniquement</option>
          <option value="series">S√©rie uniquement</option>
        </select>
        
        <select id="filterType" class="col-3">
          <option value="all">Tous</option>
          <option value="owned">Poss√©d√©s</option>
          <option value="wishlist">Wishlist</option>
        </select>

        <div class="filter-group col-3">
          <label class="filter-label">
            <input type="checkbox" id="sortBySeries" class="filter-checkbox">
            <span>Grouper par s√©rie/univers</span>
          </label>
        </div>
      </div>
    </div>

    <!-- Listes -->
    <div id="loading" class="loading">Chargement...</div>
    
    <section id="ownedSection" class="section" style="display: none;">
      <h2>üìö Ma Biblioth√®que</h2>
      <div id="ownedList" class="grid"></div>
    </section>
    
    <section id="wishSection" class="section" style="display: none;">
      <h2>üíù Ma Wishlist</h2>
      <div id="wishList" class="grid"></div>
    </section>

    <!-- Sections pour tri par s√©rie/univers -->
    <section id="groupedView" style="display: none;">
      <div id="seriesGroups"></div>
    </section>
  </main>

  <footer>
    <div class="container">
      <p class="footer-text">
        üí° <strong>Astuce :</strong> Remplissez le champ "S√©rie/Univers" pour regrouper les livres. 
        Recherche automatique des couvertures et auteurs via Google Books API. 
        Multi-√©dition temps r√©el gr√¢ce √† Firebase Firestore.
      </p>
    </div>
  </footer>

  <!-- Toast container -->
  <div id="toastContainer"></div>
  
  <script src="./themeScript.js"></script>
  <script type="module" src="./script.js"></script>
</body>
</html>